<!-- DÃ©claration du type du document -->
<!DOCTYPE html>

<!-- DÃ©but du document HTML en franÃ§ais -->
<html lang="fr">

<!-- DÃ©but de l'en-tÃªte du document -->
<head>
  <!-- DÃ©finition de l'encodage en UTF-8 -->
  <meta charset="UTF-8">

  <!-- Titre de la page -->
  <title>Espace de Ã‰dith COLIN | Intranet RH</title>

  <!-- Lien vers la feuille de style principale -->
  <link href="sirh.css" rel="stylesheet">

  <!-- Script pour vÃ©rifier l'authentification -->
  <script>
    if (localStorage.getItem("auth") !== "true") {
      // Redirige vers login si l'utilisateur n'est pas authentifiÃ©
      window.location.href = "login.html";
    }
  </script>
</head>

<!-- DÃ©but du corps du document -->
<body>

<!-- En-tÃªte principal -->
<header>
  <h1>Espace de Ã‰dith COLIN</h1>
  <nav>
    <a href="#" onclick="logout()" class="logout-btn">DÃ©connexion</a>
  </nav>
</header>

<!-- Contenu principal -->
<main class="container">

  <!-- Section des messages RH -->
  <section class="card">
    <h2>ğŸ“¬ Messages RH pour Ã‰dith COLIN</h2>
    <button id="refreshBtn" class="btn actualiser">Actualiser les messages</button>
    <div id="newMessageAlert" class="notification">ğŸ”” Nouveau message reÃ§u !</div>
    <ul id="employeeMessages" class="message-list"></ul>
  </section>

  <!-- Section pour faire une nouvelle demande -->
  <section class="card">
    <h2>ğŸ“ Nouvelle demande de Ã‰dith COLIN</h2>
    <form id="requestForm">
      <select id="requestType" required>
        <option value="">Type de demande</option>
        <option value="CongÃ©">CongÃ©</option>
        <option value="Formation">Formation</option>
      </select>
      <input type="date" id="requestDate">
      <textarea id="requestComment" placeholder="Commentaire (facultatif)"></textarea>
      <button type="submit" class="btn green">Envoyer la demande</button>
    </form>
  </section>

  <!-- Section historique des demandes -->
  <section class="card">
    <h2>ğŸ“‚ Historique des demandes de Colin Ã‰dith</h2>
    <ul id="myRequests" class="request-list"></ul>
  </section>

</main>

<!-- Lien retour au profil -->
<a href="employe.html" class="retour-btn">ğŸ”™ Retour Profil</a>

<!-- Script principal pour la gestion des messages et demandes -->
<script>
  const employeNom = "Colin Ã‰dith"; // Nom de l'employÃ© pour filtrer
  let previousMessageCount = 0; // Compteur pour vÃ©rifier les nouveaux messages

  function loadMessages() {
    // RÃ©cupÃ¨re tous les messages stockÃ©s
    const allMessages = JSON.parse(localStorage.getItem("messagesRH") || "[]");
    const userMessages = allMessages.filter(msg => msg.nom === employeNom);
    const messageList = document.getElementById("employeeMessages");
    messageList.innerHTML = ""; // Vide la liste avant de recharger

    userMessages.forEach(msg => {
      const li = document.createElement("li");
      li.className = "message-item";
      li.innerHTML = `
        <strong>ğŸ“Œ ${msg.sujet}</strong> â€“ <em>${msg.date}</em><br>
        ${msg.contenu}
      `;
      messageList.appendChild(li);
    });

    if (userMessages.length > previousMessageCount) {
      // Affiche une notification si de nouveaux messages arrivent
      const notif = document.getElementById("newMessageAlert");
      notif.style.display = "block";
      setTimeout(() => notif.style.display = "none", 3000);
    }

    previousMessageCount = userMessages.length;
  }

  function loadRequests() {
    // RÃ©cupÃ¨re toutes les demandes stockÃ©es
    const allRequests = JSON.parse(localStorage.getItem("demandesRH") || "[]");
    const requestList = document.getElementById("myRequests");
    requestList.innerHTML = ""; // Vide la liste avant de recharger

    allRequests
      .filter(req => req.nom === employeNom)
      .forEach(req => {
        const li = document.createElement("li");
        li.className = "demande-item";
        li.innerHTML = `
          <strong>${req.type}</strong> demandÃ© le ${req.date}<br>
          <em>${req.commentaire}</em><br>
          <strong>Statut :</strong> ${req.statut}
        `;
        requestList.appendChild(li);
      });
  }

  // RafraÃ®chir les messages quand on clique sur le bouton
  document.getElementById("refreshBtn").addEventListener("click", loadMessages);

  // Gestion de l'envoi d'une nouvelle demande
  document.getElementById("requestForm").addEventListener("submit", function (e) {
    e.preventDefault(); // EmpÃªche l'envoi classique du formulaire

    const newRequest = {
      nom: employeNom,
      type: document.getElementById("requestType").value,
      date: document.getElementById("requestDate").value || "-",
      commentaire: document.getElementById("requestComment").value.trim(),
      statut: "En attente",
      id: Date.now() // GÃ©nÃ¨re un ID unique basÃ© sur l'heure actuelle
    };

    const requests = JSON.parse(localStorage.getItem("demandesRH") || "[]");
    requests.push(newRequest);
    localStorage.setItem("demandesRH", JSON.stringify(requests));

    alert("Votre demande a bien Ã©tÃ© envoyÃ©e.");
    this.reset(); // RÃ©initialise le formulaire
    loadRequests(); // Recharge les demandes
  });

  // Chargement initial des messages et demandes
  loadMessages();
  loadRequests();
</script>

<!-- Script pour la dÃ©connexion -->
<script>
  function logout() {
    localStorage.removeItem("auth"); // Supprime l'authentification
    window.location.href = "login.html"; // Redirige vers la page de connexion
  }
</script>

</body>

<!-- Fin du document HTML -->
</html>



















<!-- <!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Espace de Ã‰dith COLIN | Intranet RH</title>
  <link href="sirh.css" rel="stylesheet">
  <script>
    if (localStorage.getItem("auth") !== "true") {
      // Si pas authentifiÃ©, retour au login
      window.location.href = "login.html";
    }
  </script>
</head>
<body>
  <header>
    <h1>Espace de Ã‰dith COLIN</h1>
    <nav>
      <a href="#" onclick="logout()" class="logout-btn">DÃ©connexion</a>
    </nav>
  </header>
  <main class="container">
    <section class="card">
      <h2>ğŸ“¬ Messages RH pour Ã‰dith COLIN</h2>
      <button id="refreshBtn" class="btn actualiser">Actualiser les messages</button>
      <div id="newMessageAlert" class="notification">ğŸ”” Nouveau message reÃ§u !</div>
      <ul id="employeeMessages" class="message-list"></ul>
    </section>

    <section class="card">
      <h2>ğŸ“ Nouvelle demande de Ã‰dith COLIN</h2>
      <form id="requestForm">
        <select id="requestType" required>
          <option value="">Type de demande</option>
          <option value="CongÃ©">CongÃ©</option>
          <option value="Formation">Formation</option>
        </select>
        <input type="date" id="requestDate">
        <textarea id="requestComment" placeholder="Commentaire (facultatif)"></textarea>
        <button type="submit" class="btn green">Envoyer la demande</button>
      </form>
    </section>

    <section class="card">
      <h2>ğŸ“‚ Historique des demandes de Colin Ã‰dith</h2>
      <ul id="myRequests" class="request-list"></ul>
    </section>
  </main>
  <a href="employe.html" class="retour-btn">ğŸ”™ Retour Profil</a>
</body>
<script>
  const employeNom = "Colin Ã‰dith";
  let previousMessageCount = 0;

  function loadMessages() {
    const allMessages = JSON.parse(localStorage.getItem("messagesRH") || "[]");
    const userMessages = allMessages.filter(msg => msg.nom === employeNom);
    const messageList = document.getElementById("employeeMessages");
    messageList.innerHTML = "";

    userMessages.forEach(msg => {
      const li = document.createElement("li");
      li.className = "message-item";
      li.innerHTML = `
        <strong>ğŸ“Œ ${msg.sujet}</strong> â€“ <em>${msg.date}</em><br>
        ${msg.contenu}
      `;
      messageList.appendChild(li);
    });

    if (userMessages.length > previousMessageCount) {
      const notif = document.getElementById("newMessageAlert");
      notif.style.display = "block";
      setTimeout(() => notif.style.display = "none", 3000);
    }

    previousMessageCount = userMessages.length;
  }

  function loadRequests() {
    const allRequests = JSON.parse(localStorage.getItem("demandesRH") || "[]");
    const requestList = document.getElementById("myRequests");
    requestList.innerHTML = "";

    allRequests
      .filter(req => req.nom === employeNom)
      .forEach(req => {
        const li = document.createElement("li");
        li.className = "demande-item";
        li.innerHTML = `
          <strong>${req.type}</strong> demandÃ© le ${req.date}<br>
          <em>${req.commentaire}</em><br>
          <strong>Statut :</strong> ${req.statut}
        `;
        requestList.appendChild(li);
      });
  }

  document.getElementById("refreshBtn").addEventListener("click", loadMessages);

  document.getElementById("requestForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const newRequest = {
      nom: employeNom,
      type: document.getElementById("requestType").value,
      date: document.getElementById("requestDate").value || "-",
      commentaire: document.getElementById("requestComment").value.trim(),
      statut: "En attente",
      id: Date.now()
    };

    const requests = JSON.parse(localStorage.getItem("demandesRH") || "[]");
    requests.push(newRequest);
    localStorage.setItem("demandesRH", JSON.stringify(requests));

    alert("Votre demande a bien Ã©tÃ© envoyÃ©e.");
    this.reset();
    loadRequests();
  });

  // Chargement automatique au dÃ©marrage
  loadMessages();
  loadRequests();
</script>
<script>
  function logout() {
    localStorage.removeItem("auth");
    window.location.href = "login.html";
Â Â }
</script>
</body>
</html> -->